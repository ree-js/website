import{lowlight as h}from"./ee9ea3.js";import{toText as c}from"./1d6513.js";import{visit as x}from"./1834b7.js";var w={}.hasOwnProperty;function j(g={}){let{aliases:s,languages:a,prefix:e,plainText:p,ignoreMissing:f,subset:m,detect:d}=g,o="hljs";if(s&&h.registerAlias(s),a){let t;for(t in a)w.call(a,t)&&h.registerLanguage(t,a[t])}if(e){let t=e.indexOf("-");o=t>-1?e.slice(0,t):e}return(t,y)=>{x(t,"element",(r,O,N)=>{let n=N;if(!n||!("tagName"in n)||n.tagName!=="pre"||r.tagName!=="code"||!r.properties)return;let i=v(r);if(i===!1||!i&&!d||i&&p&&p.includes(i))return;Array.isArray(r.properties.className)||(r.properties.className=[]),r.properties.className.includes(o)||r.properties.className.unshift(o);let l;try{l=i?h.highlight(i,c(n),{prefix:e}):h.highlightAuto(c(n),{prefix:e,subset:m})}catch(A){let u=A;(!f||!/Unknown language/.test(u.message))&&y.fail(u,r,"rehype-highlight:missing-language");return}!i&&l.data.language&&r.properties.className.push("language-"+l.data.language),Array.isArray(l.children)&&l.children.length>0&&(r.children=l.children)})}}function v(g){let s=g.properties&&g.properties.className,a=-1;if(Array.isArray(s))for(;++a<s.length;){let e=String(s[a]);if(e==="no-highlight"||e==="nohighlight")return!1;if(e.slice(0,5)==="lang-")return e.slice(5);if(e.slice(0,9)==="language-")return e.slice(9)}}export{j as default};
//# sourceMappingURL=rehype-highlight.bundle.mjs.map