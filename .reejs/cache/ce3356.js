import E from"./2527e3.js";var w="__all__",c="__default__",j=`
`;function A(e){if(!e.length)return"";let r=function(s){let t=0,n=0,i=0,l=s.length;if(l)for(;l--;)n=s[l].length,n>t&&(i=l,t=n);return s[i].length}(e.map(s=>s[0]))+4;return e.map(s=>s[0]+" ".repeat(r-s[0].length)+s[1]+(s[2]==null?"":`  (default ${s[2]})`))}function $(e){return e}function d(e,r,s){if(!r||!r.length)return"";let t=0,n="";for(n+=`
  `+e;t<r.length;t++)n+=`
    `+s(r[t]);return n+j}function y(e,r,s=1){let t=d("ERROR",[r],$);t+=`
  Run \`$ ${e} --help\` for more info.
`,console.error(t),process.exit(s)}var C=class{constructor(e,r){let[s,...t]=e.split(/\s+/);r=r||t.length>0,this.bin=s,this.ver="0.0.0",this.default="",this.tree={},this.command(w),this.command([c].concat(r?t:"<command>").join(" ")),this.single=r,this.curr=""}command(e,r,s={}){if(this.single)throw new Error('Disable "single" mode to add commands');let t=[],n=[],i=/(\[|<)/;if(e.split(/\s+/).forEach(l=>{(i.test(l.charAt(0))?n:t).push(l)}),t=t.join(" "),t in this.tree)throw new Error("Command already exists: "+t);return t.includes("__")||n.unshift(t),n=n.join(" "),this.curr=t,s.default&&(this.default=t),this.tree[t]={usage:n,alibi:[],options:[],alias:{},default:{},examples:[]},s.alias&&this.alias(s.alias),r&&this.describe(r),this}describe(e){return this.tree[this.curr||c].describe=Array.isArray(e)?e:function(r){return(r||"").replace(/([.?!])\s*(?=[A-Z])/g,"$1|").split("|")}(e),this}alias(...e){if(this.single)throw new Error('Cannot call `alias()` in "single" mode');if(!this.curr)throw new Error("Cannot call `alias()` before defining a command");return(this.tree[this.curr].alibi=this.tree[this.curr].alibi.concat(...e)).forEach(r=>this.tree[r]=this.curr),this}option(e,r,s){let t=this.tree[this.curr||w],[n,i]=function(o){return(o||"").split(/^-{1,2}|,|\s+-{1,2}|\s+/).filter(Boolean)}(e);if(i&&i.length>1&&([n,i]=[i,n]),e="--"+n,i&&i.length>0){e=`-${i}, ${e}`;let o=t.alias[i];t.alias[i]=(o||[]).concat(n)}let l=[e,r||""];return s!==void 0?(l.push(s),t.default[n]=s):i||(t.default[n]=void 0),t.options.push(l),this}action(e){return this.tree[this.curr||c].handler=e,this}example(e){return this.tree[this.curr||c].examples.push(e),this}version(e){return this.ver=e,this}parse(e,r={}){e=e.slice();let s,t,n,i,l=2,o=E(e.slice(l),{alias:{h:"help",v:"version"}}),m=this.single,u=this.bin,a="";if(m)i=this.tree[c];else{let f,g=1,O=o._.length+1;for(;g<O;g++)if(s=o._.slice(0,g).join(" "),f=this.tree[s],typeof f=="string")t=(a=f).split(" "),e.splice(e.indexOf(o._[0]),g,...t),g+=t.length-g;else if(f)a=s;else if(a)break;if(i=this.tree[a],n=i===void 0,n){if(this.default)a=this.default,i=this.tree[a],e.unshift(a),l++;else if(s)return y(u,"Invalid command: "+s)}}if(o.help)return this.help(!m&&!n&&a);if(o.version)return this._version();if(!m&&i===void 0)return y(u,"No command specified.");let h=this.tree[w];r.alias=Object.assign(h.alias,i.alias,r.alias),r.default=Object.assign(h.default,i.default,r.default),s=a.split(" "),t=e.indexOf(s[0],2),~t&&e.splice(t,s.length);let p=E(e.slice(l),r);if(!p||typeof p=="string")return y(u,p||"Parsed unknown option flag(s)!");let v=i.usage.split(/\s+/),b=v.filter(f=>f.charAt(0)==="<"),_=p._.splice(0,b.length);if(_.length<b.length)return a&&(u+=" "+a),y(u,"Insufficient arguments!");v.filter(f=>f.charAt(0)==="[").forEach(f=>{_.push(p._.shift())}),_.push(p);let x=i.handler;return r.lazy?{args:_,name:a,handler:x}:x.apply(null,_)}help(e){console.log(function(r,s,t,n){let i="",l=s[t],o="$ "+r,m=s[w],u=h=>`${o} ${h}`.replace(/\s+/g," "),a=[["-h, --help","Displays this message"]];if(t===c&&a.unshift(["-v, --version","Displays current version"]),l.options=(l.options||[]).concat(m.options,a),l.options.length>0&&(l.usage+=" [options]"),i+=d("Description",l.describe,$),i+=d("Usage",[l.usage],u),n||t!==c)n||t===c||(i+=d("Aliases",l.alibi,u));else{let h,p=/^__/,v="",b=[];for(h in s)typeof s[h]=="string"||p.test(h)||b.push([h,(s[h].describe||[""])[0]])<3&&(v+=`
    ${o} ${h} --help`);i+=d("Available Commands",A(b),$),i+="\n  For more info, run any command with the `--help` flag"+v+j}return i+=d("Options",A(l.options),$),i+=d("Examples",l.examples.map(u),$),i}(this.bin,this.tree,e||c,this.single))}_version(){console.log(`${this.bin}, ${this.ver}`)}},R=(e,r)=>new C(e,r);export{R as default};
//# sourceMappingURL=sade.bundle.mjs.map