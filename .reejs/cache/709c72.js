/* esm.sh - esbuild bundle(signal-exit@3.0.7) node production */
import __1$ from "node:events";import __2$ from "node:assert";var R=Object.create;var T=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var U=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var L=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),B=(t,e)=>{for(var n in e)T(t,n,{get:e[n],enumerable:!0})},h=(t,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let I of H(e))!j.call(t,I)&&I!==n&&T(t,I,{get:()=>e[I],enumerable:!(u=F(e,I))||u.enumerable});return t},a=(t,e,n)=>(h(t,e,"default"),n&&h(n,e,"default")),k=(t,e,n)=>(n=t!=null?R(X(t)):{},h(e||!t||!t.__esModule?T(n,"default",{value:t,enumerable:!0}):n,t));var q=L((Y,v)=>{v.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&v.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&v.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var C=L((Z,c)=>{var f=global.process,o=function(t){return t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function"};o(f)?(w=__2$,x=q(),A=/^win/i.test(f.platform),S=__1$,typeof S!="function"&&(S=S.EventEmitter),f.__signal_exit_emitter__?r=f.__signal_exit_emitter__:(r=f.__signal_exit_emitter__=new S,r.count=0,r.emitted={}),r.infinite||(r.setMaxListeners(1/0),r.infinite=!0),c.exports=function(t,e){if(!o(global.process))return function(){};w.equal(typeof t,"function","a callback must be provided for exit handler"),p===!1&&b();var n="exit";e&&e.alwaysLast&&(n="afterexit");var u=function(){r.removeListener(n,t),r.listeners("exit").length===0&&r.listeners("afterexit").length===0&&_()};return r.on(n,t),u},_=function(){!p||!o(global.process)||(p=!1,x.forEach(function(e){try{f.removeListener(e,G[e])}catch{}}),f.emit=y,f.reallyExit=d,r.count-=1)},c.exports.unload=_,i=function(e,n,u){r.emitted[e]||(r.emitted[e]=!0,r.emit(e,n,u))},G={},x.forEach(function(t){G[t]=function(){if(o(global.process)){var n=f.listeners(t);n.length===r.count&&(_(),i("exit",null,t),i("afterexit",null,t),A&&t==="SIGHUP"&&(t="SIGINT"),f.kill(f.pid,t))}}}),c.exports.signals=function(){return x},p=!1,b=function(){p||!o(global.process)||(p=!0,r.count+=1,x=x.filter(function(e){try{return f.on(e,G[e]),!0}catch{return!1}}),f.emit=O,f.reallyExit=M)},c.exports.load=b,d=f.reallyExit,M=function(e){o(global.process)&&(f.exitCode=e||0,i("exit",f.exitCode,null),i("afterexit",f.exitCode,null),d.call(f,f.exitCode))},y=f.emit,O=function(e,n){if(e==="exit"&&o(global.process)){n!==void 0&&(f.exitCode=n);var u=y.apply(this,arguments);return i("exit",f.exitCode,null),i("afterexit",f.exitCode,null),u}else return y.apply(this,arguments)}):c.exports=function(){return function(){}};var w,x,A,S,r,_,i,G,p,b,d,M,y,O});var l={};B(l,{default:()=>Q});var D=k(C());a(l,k(C()));var{default:N,...K}=D,Q=N!==void 0?N:K;export{Q as default};
//# sourceMappingURL=signal-exit.mjs.map