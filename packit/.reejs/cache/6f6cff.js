/* esm.sh - esbuild bundle(micromark-core-commonmark@1.1.0) node production */
import{push as U,splice as Mn}from"./5b8b11.js";import{classifyCharacter as pn}from"./c64720.js";import{resolveAll as Pn}from"./fbc16c.js";var qn={name:"attention",tokenize:Rn,resolveAll:Dn};function Dn(n,a){let r=-1,t,l,o,u,m,c,s,x;for(;++r<n.length;)if(n[r][0]==="enter"&&n[r][1].type==="attentionSequence"&&n[r][1]._close){for(t=r;t--;)if(n[t][0]==="exit"&&n[t][1].type==="attentionSequence"&&n[t][1]._open&&a.sliceSerialize(n[t][1]).charCodeAt(0)===a.sliceSerialize(n[r][1]).charCodeAt(0)){if((n[t][1]._close||n[r][1]._open)&&(n[r][1].end.offset-n[r][1].start.offset)%3&&!((n[t][1].end.offset-n[t][1].start.offset+n[r][1].end.offset-n[r][1].start.offset)%3))continue;c=n[t][1].end.offset-n[t][1].start.offset>1&&n[r][1].end.offset-n[r][1].start.offset>1?2:1;let h=Object.assign({},n[t][1].end),g=Object.assign({},n[r][1].start);sn(h,-c),sn(g,c),u={type:c>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},n[t][1].end)},m={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[r][1].start),end:g},o={type:c>1?"strongText":"emphasisText",start:Object.assign({},n[t][1].end),end:Object.assign({},n[r][1].start)},l={type:c>1?"strong":"emphasis",start:Object.assign({},u.start),end:Object.assign({},m.end)},n[t][1].end=Object.assign({},u.start),n[r][1].start=Object.assign({},m.end),s=[],n[t][1].end.offset-n[t][1].start.offset&&(s=U(s,[["enter",n[t][1],a],["exit",n[t][1],a]])),s=U(s,[["enter",l,a],["enter",u,a],["exit",u,a],["enter",o,a]]),s=U(s,Pn(a.parser.constructs.insideSpan.null,n.slice(t+1,r),a)),s=U(s,[["exit",o,a],["enter",m,a],["exit",m,a],["exit",l,a]]),n[r][1].end.offset-n[r][1].start.offset?(x=2,s=U(s,[["enter",n[r][1],a],["exit",n[r][1],a]])):x=0,Mn(n,t-1,r-t+3,s),r=t+s.length-x-2;break}}for(r=-1;++r<n.length;)n[r][1].type==="attentionSequence"&&(n[r][1].type="data");return n}function Rn(n,a){let r=this.parser.constructs.attentionMarkers.null,t=this.previous,l=pn(t),o;return u;function u(c){return o=c,n.enter("attentionSequence"),m(c)}function m(c){if(c===o)return n.consume(c),m;let s=n.exit("attentionSequence"),x=pn(c),h=!x||x===2&&l||r.includes(c),g=!l||l===2&&x||r.includes(t);return s._open=!!(o===42?h:h&&(l||!g)),s._close=!!(o===42?g:g&&(x||!h)),a(c)}}function sn(n,a){n.column+=a,n.offset+=a,n._bufferIndex+=a}import{asciiAlpha as Hn,asciiAlphanumeric as v,asciiAtext as Vn,asciiControl as jn}from"./967460.js";var _n={name:"autolink",tokenize:Qn};function Qn(n,a,r){let t=0;return l;function l(p){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(p),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(p){return Hn(p)?(n.consume(p),u):s(p)}function u(p){return p===43||p===45||p===46||v(p)?(t=1,m(p)):s(p)}function m(p){return p===58?(n.consume(p),t=0,c):(p===43||p===45||p===46||v(p))&&t++<32?(n.consume(p),m):(t=0,s(p))}function c(p){return p===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(p),n.exit("autolinkMarker"),n.exit("autolink"),a):p===null||p===32||p===60||jn(p)?r(p):(n.consume(p),c)}function s(p){return p===64?(n.consume(p),x):Vn(p)?(n.consume(p),s):r(p)}function x(p){return v(p)?h(p):r(p)}function h(p){return p===46?(n.consume(p),t=0,x):p===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(p),n.exit("autolinkMarker"),n.exit("autolink"),a):g(p)}function g(p){if((p===45||v(p))&&t++<63){let b=p===45?g:h;return n.consume(p),b}return r(p)}}import{factorySpace as Nn}from"./cfc29b.js";import{markdownLineEnding as Wn,markdownSpace as Un}from"./967460.js";var Q={tokenize:Gn,partial:!0};function Gn(n,a,r){return t;function t(o){return Un(o)?Nn(n,l,"linePrefix")(o):l(o)}function l(o){return o===null||Wn(o)?a(o):r(o)}}import{factorySpace as Jn}from"./cfc29b.js";import{markdownSpace as xn}from"./967460.js";var hn={name:"blockQuote",tokenize:Kn,continuation:{tokenize:Xn},exit:Yn};function Kn(n,a,r){let t=this;return l;function l(u){if(u===62){let m=t.containerState;return m.open||(n.enter("blockQuote",{_container:!0}),m.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(u),n.exit("blockQuoteMarker"),o}return r(u)}function o(u){return xn(u)?(n.enter("blockQuotePrefixWhitespace"),n.consume(u),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),a):(n.exit("blockQuotePrefix"),a(u))}}function Xn(n,a,r){let t=this;return l;function l(u){return xn(u)?Jn(n,o,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return n.attempt(hn,a,r)(u)}}function Yn(n){n.exit("blockQuote")}import{asciiPunctuation as Zn}from"./967460.js";var $n={name:"characterEscape",tokenize:vn};function vn(n,a,r){return t;function t(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),l}function l(o){return Zn(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),a):r(o)}}import{decodeNamedCharacterReference as dn}from"./9e39f9.js";import{asciiAlphanumeric as kn,asciiDigit as nt,asciiHexDigit as tt}from"./967460.js";var rt={name:"characterReference",tokenize:et};function et(n,a,r){let t=this,l=0,o,u;return m;function m(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),c}function c(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),s):(n.enter("characterReferenceValue"),o=31,u=kn,x(h))}function s(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,u=tt,x):(n.enter("characterReferenceValue"),o=7,u=nt,x(h))}function x(h){if(h===59&&l){let g=n.exit("characterReferenceValue");return u===kn&&!dn(t.sliceSerialize(g))?r(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),a)}return u(h)&&l++<o?(n.consume(h),x):r(h)}}import{factorySpace as G}from"./cfc29b.js";import{markdownLineEnding as V,markdownSpace as J}from"./967460.js";var gn={tokenize:at,partial:!0},it={name:"codeFenced",tokenize:ut,concrete:!0};function ut(n,a,r){let t=this,l={tokenize:q,partial:!0},o=0,u=0,m;return c;function c(k){return s(k)}function s(k){let z=t.events[t.events.length-1];return o=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,m=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),x(k)}function x(k){return k===m?(u++,n.consume(k),x):u<3?r(k):(n.exit("codeFencedFenceSequence"),J(k)?G(n,h,"whitespace")(k):h(k))}function h(k){return k===null||V(k)?(n.exit("codeFencedFence"),t.interrupt?a(k):n.check(gn,L,B)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||V(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(k)):J(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),G(n,p,"whitespace")(k)):k===96&&k===m?r(k):(n.consume(k),g)}function p(k){return k===null||V(k)?h(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),b(k))}function b(k){return k===null||V(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(k)):k===96&&k===m?r(k):(n.consume(k),b)}function L(k){return n.attempt(l,B,P)(k)}function P(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),_}function _(k){return o>0&&J(k)?G(n,C,"linePrefix",o+1)(k):C(k)}function C(k){return k===null||V(k)?n.check(gn,L,B)(k):(n.enter("codeFlowValue"),y(k))}function y(k){return k===null||V(k)?(n.exit("codeFlowValue"),C(k)):(n.consume(k),y)}function B(k){return n.exit("codeFenced"),a(k)}function q(k,z,I){let E=0;return O;function O(S){return k.enter("lineEnding"),k.consume(S),k.exit("lineEnding"),M}function M(S){return k.enter("codeFencedFence"),J(S)?G(k,f,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):f(S)}function f(S){return S===m?(k.enter("codeFencedFenceSequence"),A(S)):I(S)}function A(S){return S===m?(E++,k.consume(S),A):E>=u?(k.exit("codeFencedFenceSequence"),J(S)?G(k,D,"whitespace")(S):D(S)):I(S)}function D(S){return S===null||V(S)?(k.exit("codeFencedFence"),z(S)):I(S)}}}function at(n,a,r){let t=this;return l;function l(u){return u===null?r(u):(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),o)}function o(u){return t.parser.lazy[t.now().line]?r(u):a(u)}}import{factorySpace as cn}from"./cfc29b.js";import{markdownLineEnding as d}from"./967460.js";var lt={name:"codeIndented",tokenize:mt},ot={tokenize:pt,partial:!0};function mt(n,a,r){let t=this;return l;function l(s){return n.enter("codeIndented"),cn(n,o,"linePrefix",4+1)(s)}function o(s){let x=t.events[t.events.length-1];return x&&x[1].type==="linePrefix"&&x[2].sliceSerialize(x[1],!0).length>=4?u(s):r(s)}function u(s){return s===null?c(s):d(s)?n.attempt(ot,u,c)(s):(n.enter("codeFlowValue"),m(s))}function m(s){return s===null||d(s)?(n.exit("codeFlowValue"),u(s)):(n.consume(s),m)}function c(s){return n.exit("codeIndented"),a(s)}}function pt(n,a,r){let t=this;return l;function l(u){return t.parser.lazy[t.now().line]?r(u):d(u)?(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),l):cn(n,o,"linePrefix",4+1)(u)}function o(u){let m=t.events[t.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?a(u):d(u)?l(u):r(u)}}import{markdownLineEnding as Sn}from"./967460.js";var st={name:"codeText",tokenize:kt,resolve:xt,previous:ht};function xt(n){let a=n.length-4,r=3,t,l;if((n[r][1].type==="lineEnding"||n[r][1].type==="space")&&(n[a][1].type==="lineEnding"||n[a][1].type==="space")){for(t=r;++t<a;)if(n[t][1].type==="codeTextData"){n[r][1].type="codeTextPadding",n[a][1].type="codeTextPadding",r+=2,a-=2;break}}for(t=r-1,a++;++t<=a;)l===void 0?t!==a&&n[t][1].type!=="lineEnding"&&(l=t):(t===a||n[t][1].type==="lineEnding")&&(n[l][1].type="codeTextData",t!==l+2&&(n[l][1].end=n[t-1][1].end,n.splice(l+2,t-l-2),a-=t-l-2,t=l+2),l=void 0);return n}function ht(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kt(n,a,r){let t=this,l=0,o,u;return m;function m(g){return n.enter("codeText"),n.enter("codeTextSequence"),c(g)}function c(g){return g===96?(n.consume(g),l++,c):(n.exit("codeTextSequence"),s(g))}function s(g){return g===null?r(g):g===32?(n.enter("space"),n.consume(g),n.exit("space"),s):g===96?(u=n.enter("codeTextSequence"),o=0,h(g)):Sn(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),s):(n.enter("codeTextData"),x(g))}function x(g){return g===null||g===32||g===96||Sn(g)?(n.exit("codeTextData"),s(g)):(n.consume(g),x)}function h(g){return g===96?(n.consume(g),o++,h):o===l?(n.exit("codeTextSequence"),n.exit("codeText"),a(g)):(u.type="codeTextData",x(g))}}import{factorySpace as gt}from"./cfc29b.js";import{markdownLineEnding as fn}from"./967460.js";import{subtokenize as ct}from"./659a10.js";var St={tokenize:zt,resolve:bt},ft={tokenize:yt,partial:!0};function bt(n){return ct(n),n}function zt(n,a){let r;return t;function t(m){return n.enter("content"),r=n.enter("chunkContent",{contentType:"content"}),l(m)}function l(m){return m===null?o(m):fn(m)?n.check(ft,u,o)(m):(n.consume(m),l)}function o(m){return n.exit("chunkContent"),n.exit("content"),a(m)}function u(m){return n.consume(m),n.exit("chunkContent"),r.next=n.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,l}}function yt(n,a,r){let t=this;return l;function l(u){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),gt(n,o,"linePrefix")}function o(u){if(u===null||fn(u))return r(u);let m=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?a(u):n.interrupt(t.parser.constructs.flow,r,a)(u)}}import{factoryDestination as Et}from"./0f24fb.js";import{factoryLabel as wt}from"./5ad408.js";import{factorySpace as bn}from"./cfc29b.js";import{factoryTitle as Lt}from"./afdc0b.js";import{factoryWhitespace as zn}from"./aea28c.js";import{markdownLineEnding as yn,markdownLineEndingOrSpace as En,markdownSpace as wn}from"./967460.js";import{normalizeIdentifier as Ct}from"./46e3c9.js";var At={name:"definition",tokenize:Tt},It={tokenize:Ft,partial:!0};function Tt(n,a,r){let t=this,l;return o;function o(p){return n.enter("definition"),u(p)}function u(p){return wt.call(t,n,m,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function m(p){return l=Ct(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),p===58?(n.enter("definitionMarker"),n.consume(p),n.exit("definitionMarker"),c):r(p)}function c(p){return En(p)?zn(n,s)(p):s(p)}function s(p){return Et(n,x,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function x(p){return n.attempt(It,h,h)(p)}function h(p){return wn(p)?bn(n,g,"whitespace")(p):g(p)}function g(p){return p===null||yn(p)?(n.exit("definition"),t.parser.defined.push(l),a(p)):r(p)}}function Ft(n,a,r){return t;function t(m){return En(m)?zn(n,l)(m):r(m)}function l(m){return Lt(n,o,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(m)}function o(m){return wn(m)?bn(n,u,"whitespace")(m):u(m)}function u(m){return m===null||yn(m)?a(m):r(m)}}import{markdownLineEnding as Bt}from"./967460.js";var Ot={name:"hardBreakEscape",tokenize:Mt};function Mt(n,a,r){return t;function t(o){return n.enter("hardBreakEscape"),n.consume(o),l}function l(o){return Bt(o)?(n.exit("hardBreakEscape"),a(o)):r(o)}}import{factorySpace as Pt}from"./cfc29b.js";import{markdownLineEnding as qt,markdownLineEndingOrSpace as Ln,markdownSpace as Dt}from"./967460.js";import{splice as Rt}from"./5b8b11.js";var Ht={name:"headingAtx",tokenize:jt,resolve:Vt};function Vt(n,a){let r=n.length-2,t=3,l,o;return n[t][1].type==="whitespace"&&(t+=2),r-2>t&&n[r][1].type==="whitespace"&&(r-=2),n[r][1].type==="atxHeadingSequence"&&(t===r-1||r-4>t&&n[r-2][1].type==="whitespace")&&(r-=t+1===r?2:4),r>t&&(l={type:"atxHeadingText",start:n[t][1].start,end:n[r][1].end},o={type:"chunkText",start:n[t][1].start,end:n[r][1].end,contentType:"text"},Rt(n,t,r-t+1,[["enter",l,a],["enter",o,a],["exit",o,a],["exit",l,a]])),n}function jt(n,a,r){let t=0;return l;function l(x){return n.enter("atxHeading"),o(x)}function o(x){return n.enter("atxHeadingSequence"),u(x)}function u(x){return x===35&&t++<6?(n.consume(x),u):x===null||Ln(x)?(n.exit("atxHeadingSequence"),m(x)):r(x)}function m(x){return x===35?(n.enter("atxHeadingSequence"),c(x)):x===null||qt(x)?(n.exit("atxHeading"),a(x)):Dt(x)?Pt(n,m,"whitespace")(x):(n.enter("atxHeadingText"),s(x))}function c(x){return x===35?(n.consume(x),c):(n.exit("atxHeadingSequence"),m(x))}function s(x){return x===null||x===35||Ln(x)?(n.exit("atxHeadingText"),m(x)):(n.consume(x),s)}}import{asciiAlpha as K,asciiAlphanumeric as Cn,markdownLineEnding as j,markdownLineEndingOrSpace as An,markdownSpace as N}from"./967460.js";import{htmlBlockNames as _t,htmlRawNames as In}from"./594de2.js";var Qt={name:"htmlFlow",tokenize:Gt,resolveTo:Ut,concrete:!0},Nt={tokenize:Kt,partial:!0},Wt={tokenize:Jt,partial:!0};function Ut(n){let a=n.length;for(;a--&&!(n[a][0]==="enter"&&n[a][1].type==="htmlFlow"););return a>1&&n[a-2][1].type==="linePrefix"&&(n[a][1].start=n[a-2][1].start,n[a+1][1].start=n[a-2][1].start,n.splice(a-2,2)),n}function Gt(n,a,r){let t=this,l,o,u,m,c;return s;function s(i){return x(i)}function x(i){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(i),h}function h(i){return i===33?(n.consume(i),g):i===47?(n.consume(i),o=!0,L):i===63?(n.consume(i),l=3,t.interrupt?a:e):K(i)?(n.consume(i),u=String.fromCharCode(i),P):r(i)}function g(i){return i===45?(n.consume(i),l=2,p):i===91?(n.consume(i),l=5,m=0,b):K(i)?(n.consume(i),l=4,t.interrupt?a:e):r(i)}function p(i){return i===45?(n.consume(i),t.interrupt?a:e):r(i)}function b(i){let H="CDATA[";return i===H.charCodeAt(m++)?(n.consume(i),m===H.length?t.interrupt?a:f:b):r(i)}function L(i){return K(i)?(n.consume(i),u=String.fromCharCode(i),P):r(i)}function P(i){if(i===null||i===47||i===62||An(i)){let H=i===47,On=u.toLowerCase();return!H&&!o&&In.includes(On)?(l=1,t.interrupt?a(i):f(i)):_t.includes(u.toLowerCase())?(l=6,H?(n.consume(i),_):t.interrupt?a(i):f(i)):(l=7,t.interrupt&&!t.parser.lazy[t.now().line]?r(i):o?C(i):y(i))}return i===45||Cn(i)?(n.consume(i),u+=String.fromCharCode(i),P):r(i)}function _(i){return i===62?(n.consume(i),t.interrupt?a:f):r(i)}function C(i){return N(i)?(n.consume(i),C):O(i)}function y(i){return i===47?(n.consume(i),O):i===58||i===95||K(i)?(n.consume(i),B):N(i)?(n.consume(i),y):O(i)}function B(i){return i===45||i===46||i===58||i===95||Cn(i)?(n.consume(i),B):q(i)}function q(i){return i===61?(n.consume(i),k):N(i)?(n.consume(i),q):y(i)}function k(i){return i===null||i===60||i===61||i===62||i===96?r(i):i===34||i===39?(n.consume(i),c=i,z):N(i)?(n.consume(i),k):I(i)}function z(i){return i===c?(n.consume(i),c=null,E):i===null||j(i)?r(i):(n.consume(i),z)}function I(i){return i===null||i===34||i===39||i===47||i===60||i===61||i===62||i===96||An(i)?q(i):(n.consume(i),I)}function E(i){return i===47||i===62||N(i)?y(i):r(i)}function O(i){return i===62?(n.consume(i),M):r(i)}function M(i){return i===null||j(i)?f(i):N(i)?(n.consume(i),M):r(i)}function f(i){return i===45&&l===2?(n.consume(i),T):i===60&&l===1?(n.consume(i),w):i===62&&l===4?(n.consume(i),R):i===63&&l===3?(n.consume(i),e):i===93&&l===5?(n.consume(i),$):j(i)&&(l===6||l===7)?(n.exit("htmlFlowData"),n.check(Nt,rn,A)(i)):i===null||j(i)?(n.exit("htmlFlowData"),A(i)):(n.consume(i),f)}function A(i){return n.check(Wt,D,rn)(i)}function D(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),S}function S(i){return i===null||j(i)?A(i):(n.enter("htmlFlowData"),f(i))}function T(i){return i===45?(n.consume(i),e):f(i)}function w(i){return i===47?(n.consume(i),u="",Z):f(i)}function Z(i){if(i===62){let H=u.toLowerCase();return In.includes(H)?(n.consume(i),R):f(i)}return K(i)&&u.length<8?(n.consume(i),u+=String.fromCharCode(i),Z):f(i)}function $(i){return i===93?(n.consume(i),e):f(i)}function e(i){return i===62?(n.consume(i),R):i===45&&l===2?(n.consume(i),e):f(i)}function R(i){return i===null||j(i)?(n.exit("htmlFlowData"),rn(i)):(n.consume(i),R)}function rn(i){return n.exit("htmlFlow"),a(i)}}function Jt(n,a,r){let t=this;return l;function l(u){return j(u)?(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),o):r(u)}function o(u){return t.parser.lazy[t.now().line]?r(u):a(u)}}function Kt(n,a,r){return t;function t(l){return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),n.attempt(Q,a,r)}}import{factorySpace as Xt}from"./cfc29b.js";import{asciiAlpha as nn,asciiAlphanumeric as en,markdownLineEnding as F,markdownLineEndingOrSpace as un,markdownSpace as X}from"./967460.js";var Yt={name:"htmlText",tokenize:Zt};function Zt(n,a,r){let t=this,l,o,u;return m;function m(e){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(e),c}function c(e){return e===33?(n.consume(e),s):e===47?(n.consume(e),q):e===63?(n.consume(e),y):nn(e)?(n.consume(e),I):r(e)}function s(e){return e===45?(n.consume(e),x):e===91?(n.consume(e),o=0,b):nn(e)?(n.consume(e),C):r(e)}function x(e){return e===45?(n.consume(e),p):r(e)}function h(e){return e===null?r(e):e===45?(n.consume(e),g):F(e)?(u=h,w(e)):(n.consume(e),h)}function g(e){return e===45?(n.consume(e),p):h(e)}function p(e){return e===62?T(e):e===45?g(e):h(e)}function b(e){let R="CDATA[";return e===R.charCodeAt(o++)?(n.consume(e),o===R.length?L:b):r(e)}function L(e){return e===null?r(e):e===93?(n.consume(e),P):F(e)?(u=L,w(e)):(n.consume(e),L)}function P(e){return e===93?(n.consume(e),_):L(e)}function _(e){return e===62?T(e):e===93?(n.consume(e),_):L(e)}function C(e){return e===null||e===62?T(e):F(e)?(u=C,w(e)):(n.consume(e),C)}function y(e){return e===null?r(e):e===63?(n.consume(e),B):F(e)?(u=y,w(e)):(n.consume(e),y)}function B(e){return e===62?T(e):y(e)}function q(e){return nn(e)?(n.consume(e),k):r(e)}function k(e){return e===45||en(e)?(n.consume(e),k):z(e)}function z(e){return F(e)?(u=z,w(e)):X(e)?(n.consume(e),z):T(e)}function I(e){return e===45||en(e)?(n.consume(e),I):e===47||e===62||un(e)?E(e):r(e)}function E(e){return e===47?(n.consume(e),T):e===58||e===95||nn(e)?(n.consume(e),O):F(e)?(u=E,w(e)):X(e)?(n.consume(e),E):T(e)}function O(e){return e===45||e===46||e===58||e===95||en(e)?(n.consume(e),O):M(e)}function M(e){return e===61?(n.consume(e),f):F(e)?(u=M,w(e)):X(e)?(n.consume(e),M):E(e)}function f(e){return e===null||e===60||e===61||e===62||e===96?r(e):e===34||e===39?(n.consume(e),l=e,A):F(e)?(u=f,w(e)):X(e)?(n.consume(e),f):(n.consume(e),D)}function A(e){return e===l?(n.consume(e),l=void 0,S):e===null?r(e):F(e)?(u=A,w(e)):(n.consume(e),A)}function D(e){return e===null||e===34||e===39||e===60||e===61||e===96?r(e):e===47||e===62||un(e)?E(e):(n.consume(e),D)}function S(e){return e===47||e===62||un(e)?E(e):r(e)}function T(e){return e===62?(n.consume(e),n.exit("htmlTextData"),n.exit("htmlText"),a):r(e)}function w(e){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),Z}function Z(e){return X(e)?Xt(n,$,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e):$(e)}function $(e){return n.enter("htmlTextData"),u(e)}}import{factoryDestination as $t}from"./0f24fb.js";import{factoryLabel as vt}from"./5ad408.js";import{factoryTitle as dt}from"./afdc0b.js";import{factoryWhitespace as an}from"./aea28c.js";import{markdownLineEndingOrSpace as ln}from"./967460.js";import{push as W,splice as nr}from"./5b8b11.js";import{normalizeIdentifier as Tn}from"./46e3c9.js";import{resolveAll as tr}from"./fbc16c.js";var Y={name:"labelEnd",tokenize:lr,resolveTo:ar,resolveAll:ur},rr={tokenize:or},er={tokenize:mr},ir={tokenize:pr};function ur(n){let a=-1;for(;++a<n.length;){let r=n[a][1];(r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd")&&(n.splice(a+1,r.type==="labelImage"?4:2),r.type="data",a++)}return n}function ar(n,a){let r=n.length,t=0,l,o,u,m;for(;r--;)if(l=n[r][1],o){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;n[r][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(u){if(n[r][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(o=r,l.type!=="labelLink")){t=2;break}}else l.type==="labelEnd"&&(u=r);let c={type:n[o][1].type==="labelLink"?"link":"image",start:Object.assign({},n[o][1].start),end:Object.assign({},n[n.length-1][1].end)},s={type:"label",start:Object.assign({},n[o][1].start),end:Object.assign({},n[u][1].end)},x={type:"labelText",start:Object.assign({},n[o+t+2][1].end),end:Object.assign({},n[u-2][1].start)};return m=[["enter",c,a],["enter",s,a]],m=W(m,n.slice(o+1,o+t+3)),m=W(m,[["enter",x,a]]),m=W(m,tr(a.parser.constructs.insideSpan.null,n.slice(o+t+4,u-3),a)),m=W(m,[["exit",x,a],n[u-2],n[u-1],["exit",s,a]]),m=W(m,n.slice(u+1)),m=W(m,[["exit",c,a]]),nr(n,o,n.length,m),n}function lr(n,a,r){let t=this,l=t.events.length,o,u;for(;l--;)if((t.events[l][1].type==="labelImage"||t.events[l][1].type==="labelLink")&&!t.events[l][1]._balanced){o=t.events[l][1];break}return m;function m(g){return o?o._inactive?h(g):(u=t.parser.defined.includes(Tn(t.sliceSerialize({start:o.end,end:t.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),c):r(g)}function c(g){return g===40?n.attempt(rr,x,u?x:h)(g):g===91?n.attempt(er,x,u?s:h)(g):u?x(g):h(g)}function s(g){return n.attempt(ir,x,h)(g)}function x(g){return a(g)}function h(g){return o._balanced=!0,r(g)}}function or(n,a,r){return t;function t(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),l}function l(h){return ln(h)?an(n,o)(h):o(h)}function o(h){return h===41?x(h):$t(n,u,m,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function u(h){return ln(h)?an(n,c)(h):x(h)}function m(h){return r(h)}function c(h){return h===34||h===39||h===40?dt(n,s,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):x(h)}function s(h){return ln(h)?an(n,x)(h):x(h)}function x(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),a):r(h)}}function mr(n,a,r){let t=this;return l;function l(m){return vt.call(t,n,o,u,"reference","referenceMarker","referenceString")(m)}function o(m){return t.parser.defined.includes(Tn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?a(m):r(m)}function u(m){return r(m)}}function pr(n,a,r){return t;function t(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),l}function l(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),a):r(o)}}var sr={name:"labelStartImage",tokenize:xr,resolveAll:Y.resolveAll};function xr(n,a,r){let t=this;return l;function l(m){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(m),n.exit("labelImageMarker"),o}function o(m){return m===91?(n.enter("labelMarker"),n.consume(m),n.exit("labelMarker"),n.exit("labelImage"),u):r(m)}function u(m){return m===94&&"_hiddenFootnoteSupport"in t.parser.constructs?r(m):a(m)}}var hr={name:"labelStartLink",tokenize:kr,resolveAll:Y.resolveAll};function kr(n,a,r){let t=this;return l;function l(u){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(u),n.exit("labelMarker"),n.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in t.parser.constructs?r(u):a(u)}}import{factorySpace as gr}from"./cfc29b.js";import"./967460.js";var cr={name:"lineEnding",tokenize:Sr};function Sr(n,a){return r;function r(t){return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),gr(n,a,"linePrefix")}}import{factorySpace as tn}from"./cfc29b.js";import{asciiDigit as Fn,markdownSpace as mn}from"./967460.js";import{factorySpace as fr}from"./cfc29b.js";import{markdownLineEnding as br,markdownSpace as zr}from"./967460.js";var on={name:"thematicBreak",tokenize:yr};function yr(n,a,r){let t=0,l;return o;function o(s){return n.enter("thematicBreak"),u(s)}function u(s){return l=s,m(s)}function m(s){return s===l?(n.enter("thematicBreakSequence"),c(s)):t>=3&&(s===null||br(s))?(n.exit("thematicBreak"),a(s)):r(s)}function c(s){return s===l?(n.consume(s),t++,c):(n.exit("thematicBreakSequence"),zr(s)?fr(n,m,"whitespace")(s):m(s))}}var Bn={name:"list",tokenize:Lr,continuation:{tokenize:Cr},exit:Ir},Er={tokenize:Tr,partial:!0},wr={tokenize:Ar,partial:!0};function Lr(n,a,r){let t=this,l=t.events[t.events.length-1],o=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,u=0;return m;function m(p){let b=t.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!t.containerState.marker||p===t.containerState.marker:Fn(p)){if(t.containerState.type||(t.containerState.type=b,n.enter(b,{_container:!0})),b==="listUnordered")return n.enter("listItemPrefix"),p===42||p===45?n.check(on,r,s)(p):s(p);if(!t.interrupt||p===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(p)}return r(p)}function c(p){return Fn(p)&&++u<10?(n.consume(p),c):(!t.interrupt||u<2)&&(t.containerState.marker?p===t.containerState.marker:p===41||p===46)?(n.exit("listItemValue"),s(p)):r(p)}function s(p){return n.enter("listItemMarker"),n.consume(p),n.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||p,n.check(Q,t.interrupt?r:x,n.attempt(Er,g,h))}function x(p){return t.containerState.initialBlankLine=!0,o++,g(p)}function h(p){return mn(p)?(n.enter("listItemPrefixWhitespace"),n.consume(p),n.exit("listItemPrefixWhitespace"),g):r(p)}function g(p){return t.containerState.size=o+t.sliceSerialize(n.exit("listItemPrefix"),!0).length,a(p)}}function Cr(n,a,r){let t=this;return t.containerState._closeFlow=void 0,n.check(Q,l,o);function l(m){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,tn(n,a,"listItemIndent",t.containerState.size+1)(m)}function o(m){return t.containerState.furtherBlankLines||!mn(m)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,u(m)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n.attempt(wr,a,u)(m))}function u(m){return t.containerState._closeFlow=!0,t.interrupt=void 0,tn(n,n.attempt(Bn,a,r),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m)}}function Ar(n,a,r){let t=this;return tn(n,l,"listItemIndent",t.containerState.size+1);function l(o){let u=t.events[t.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===t.containerState.size?a(o):r(o)}}function Ir(n){n.exit(this.containerState.type)}function Tr(n,a,r){let t=this;return tn(n,l,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function l(o){let u=t.events[t.events.length-1];return!mn(o)&&u&&u[1].type==="listItemPrefixWhitespace"?a(o):r(o)}}import{factorySpace as Fr}from"./cfc29b.js";import{markdownLineEnding as Br,markdownSpace as Or}from"./967460.js";var Mr={name:"setextUnderline",tokenize:qr,resolveTo:Pr};function Pr(n,a){let r=n.length,t,l,o;for(;r--;)if(n[r][0]==="enter"){if(n[r][1].type==="content"){t=r;break}n[r][1].type==="paragraph"&&(l=r)}else n[r][1].type==="content"&&n.splice(r,1),!o&&n[r][1].type==="definition"&&(o=r);let u={type:"setextHeading",start:Object.assign({},n[l][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[l][1].type="setextHeadingText",o?(n.splice(l,0,["enter",u,a]),n.splice(o+1,0,["exit",n[t][1],a]),n[t][1].end=Object.assign({},n[o][1].end)):n[t][1]=u,n.push(["exit",u,a]),n}function qr(n,a,r){let t=this,l;return o;function o(s){let x=t.events.length,h;for(;x--;)if(t.events[x][1].type!=="lineEnding"&&t.events[x][1].type!=="linePrefix"&&t.events[x][1].type!=="content"){h=t.events[x][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||h)?(n.enter("setextHeadingLine"),l=s,u(s)):r(s)}function u(s){return n.enter("setextHeadingLineSequence"),m(s)}function m(s){return s===l?(n.consume(s),m):(n.exit("setextHeadingLineSequence"),Or(s)?Fr(n,c,"lineSuffix")(s):c(s))}function c(s){return s===null||Br(s)?(n.exit("setextHeadingLine"),a(s)):r(s)}}export{qn as attention,_n as autolink,Q as blankLine,hn as blockQuote,$n as characterEscape,rt as characterReference,it as codeFenced,lt as codeIndented,st as codeText,St as content,At as definition,Ot as hardBreakEscape,Ht as headingAtx,Qt as htmlFlow,Yt as htmlText,Y as labelEnd,sr as labelStartImage,hr as labelStartLink,cr as lineEnding,Bn as list,Mr as setextUnderline,on as thematicBreak};
//# sourceMappingURL=micromark-core-commonmark.mjs.map