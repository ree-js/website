/* esm.sh - esbuild bundle(micromark@3.2.0/lib/parse) node production */
var kn=Object.defineProperty;var wn=(n,t)=>{for(var r in t)kn(n,r,{get:t[r],enumerable:!0})};import{combineExtensions as it}from"./13fa6c.js";import{factorySpace as vn}from"./cfc29b.js";import{markdownLineEnding as bn}from"./967460.js";var Z={tokenize:Cn};function Cn(n){let t=n.attempt(this.parser.constructs.contentInitial,e,i),r;return t;function e(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),vn(n,t,"linePrefix")}function i(a){return n.enter("paragraph"),o(a)}function o(a){let p=n.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=p),r=p,u(a)}function u(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return bn(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),u)}}import{factorySpace as In}from"./cfc29b.js";import{markdownLineEnding as _n}from"./967460.js";import{splice as $}from"./5b8b11.js";var tn={tokenize:yn},nn={tokenize:Sn};function yn(n){let t=this,r=[],e=0,i,o,u;return a;function a(s){if(e<r.length){let h=r[e];return t.containerState=h[1],n.attempt(h[0].continuation,p,d)(s)}return d(s)}function p(s){if(e++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&B();let h=t.events.length,g=h,m;for(;g--;)if(t.events[g][0]==="exit"&&t.events[g][1].type==="chunkFlow"){m=t.events[g][1].end;break}S(e);let v=h;for(;v<t.events.length;)t.events[v][1].end=Object.assign({},m),v++;return $(t.events,g+1,0,t.events.slice(h)),t.events.length=v,d(s)}return a(s)}function d(s){if(e===r.length){if(!i)return I(s);if(i.currentConstruct&&i.currentConstruct.concrete)return T(s);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},n.check(nn,l,C)(s)}function l(s){return i&&B(),S(e),I(s)}function C(s){return t.parser.lazy[t.now().line]=e!==r.length,u=t.now().offset,T(s)}function I(s){return t.containerState={},n.attempt(nn,z,T)(s)}function z(s){return e++,r.push([t.currentConstruct,t.containerState]),I(s)}function T(s){if(s===null){i&&B(),S(0),n.consume(s);return}return i=i||t.parser.flow(t.now()),n.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),F(s)}function F(s){if(s===null){y(n.exit("chunkFlow"),!0),S(0),n.consume(s);return}return _n(s)?(n.consume(s),y(n.exit("chunkFlow")),e=0,t.interrupt=void 0,a):(n.consume(s),F)}function y(s,h){let g=t.sliceStream(s);if(h&&g.push(null),s.previous=o,o&&(o.next=s),o=s,i.defineSkip(s.start),i.write(g),t.parser.lazy[s.start.line]){let m=i.events.length;for(;m--;)if(i.events[m][1].start.offset<u&&(!i.events[m][1].end||i.events[m][1].end.offset>u))return;let v=t.events.length,_=v,A,O;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){if(A){O=t.events[_][1].end;break}A=!0}for(S(e),m=v;m<t.events.length;)t.events[m][1].end=Object.assign({},O),m++;$(t.events,_+1,0,t.events.slice(v)),t.events.length=m}}function S(s){let h=r.length;for(;h-- >s;){let g=r[h];t.containerState=g[1],g[0].exit.call(t,n)}r.length=s}function B(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Sn(n,t,r){return In(n,n.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}import{blankLine as En,content as zn}from"./6f6cff.js";import{factorySpace as An}from"./cfc29b.js";import"./967460.js";var en={tokenize:Tn};function Tn(n){let t=this,r=n.attempt(En,e,n.attempt(this.parser.constructs.flowInitial,i,An(n,n.attempt(this.parser.constructs.flow,i,n.attempt(zn,i)),"linePrefix")));return r;function e(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),t.currentConstruct=void 0,r}}var rn={resolveAll:sn()},on=ln("string"),un=ln("text");function ln(n){return{tokenize:t,resolveAll:sn(n==="text"?Fn:void 0)};function t(r){let e=this,i=this.parser.constructs[n],o=r.attempt(i,u,a);return u;function u(l){return d(l)?o(l):a(l)}function a(l){if(l===null){r.consume(l);return}return r.enter("data"),r.consume(l),p}function p(l){return d(l)?(r.exit("data"),o(l)):(r.consume(l),p)}function d(l){if(l===null)return!0;let C=i[l],I=-1;if(C)for(;++I<C.length;){let z=C[I];if(!z.previous||z.previous.call(e,e.previous))return!0}return!1}}}function sn(n){return t;function t(r,e){let i=-1,o;for(;++i<=r.length;)o===void 0?r[i]&&r[i][1].type==="data"&&(o=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==o+2&&(r[o][1].end=r[i-1][1].end,r.splice(o+2,i-o-2),i=o+2),o=void 0);return n?n(r,e):r}}function Fn(n,t){let r=0;for(;++r<=n.length;)if((r===n.length||n[r][1].type==="lineEnding")&&n[r-1][1].type==="data"){let e=n[r-1][1],i=t.sliceStream(e),o=i.length,u=-1,a=0,p;for(;o--;){let d=i[o];if(typeof d=="string"){for(u=d.length;d.charCodeAt(u-1)===32;)a++,u--;if(u)break;u=-1}else if(d===-2)p=!0,a++;else if(d!==-1){o++;break}}if(a){let d={type:r===n.length||p||a<2?"lineSuffix":"hardBreakTrailing",start:{line:e.end.line,column:e.end.column-a,offset:e.end.offset-a,_index:e.start._index+o,_bufferIndex:o?u:e.start._bufferIndex+u},end:Object.assign({},e.end)};e.end=Object.assign({},d.start),e.start.offset===e.end.offset?Object.assign(e,d):(n.splice(r,0,["enter",d,t],["exit",d,t]),r+=2)}r++}return n}import{markdownLineEnding as Bn}from"./967460.js";import{push as On,splice as jn}from"./5b8b11.js";import{resolveAll as Ln}from"./fbc16c.js";function cn(n,t,r){let e=Object.assign(r?Object.assign({},r):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],u=[],a=[],p=!0,d={consume:h,enter:g,exit:m,attempt:A(v),check:A(_),interrupt:A(_,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:F,sliceSerialize:T,now:y,defineSkip:S,write:z},C=t.tokenize.call(l,d),I;return t.resolveAll&&o.push(t),l;function z(c){return u=On(u,c),B(),u[u.length-1]!==null?[]:(O(t,0),l.events=Ln(o,l.events,l),l.events)}function T(c,f){return Nn(F(c),f)}function F(c){return Pn(u,c)}function y(){let{line:c,column:f,offset:w,_index:b,_bufferIndex:j}=e;return{line:c,column:f,offset:w,_index:b,_bufferIndex:j}}function S(c){i[c.line]=c.column,M()}function B(){let c;for(;e._index<u.length;){let f=u[e._index];if(typeof f=="string")for(c=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===c&&e._bufferIndex<f.length;)s(f.charCodeAt(e._bufferIndex));else s(f)}}function s(c){p=void 0,I=c,C=C(c)}function h(c){Bn(c)?(e.line++,e.column=1,e.offset+=c===-3?2:1,M()):c!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===u[e._index].length&&(e._bufferIndex=-1,e._index++)),l.previous=c,p=!0}function g(c,f){let w=f||{};return w.type=c,w.start=y(),l.events.push(["enter",w,l]),a.push(w),w}function m(c){let f=a.pop();return f.end=y(),l.events.push(["exit",f,l]),f}function v(c,f){O(c,f.from)}function _(c,f){f.restore()}function A(c,f){return w;function w(b,j,L){let R,P,W,H;return Array.isArray(b)?Q(b):"tokenize"in b?Q([b]):mn(b);function mn(x){return U;function U(E){let N=E!==null&&x[E],D=E!==null&&x.null,gn=[...Array.isArray(N)?N:N?[N]:[],...Array.isArray(D)?D:D?[D]:[]];return Q(gn)(E)}}function Q(x){return R=x,P=0,x.length===0?L:X(x[P])}function X(x){return U;function U(E){return H=xn(),W=x,x.partial||(l.currentConstruct=x),x.name&&l.parser.constructs.disable.null.includes(x.name)?Y(E):x.tokenize.call(f?Object.assign(Object.create(l),f):l,d,hn,Y)(E)}}function hn(x){return p=!0,c(W,H),j}function Y(x){return p=!0,H.restore(),++P<R.length?X(R[P]):L}}}function O(c,f){c.resolveAll&&!o.includes(c)&&o.push(c),c.resolve&&jn(l.events,f,l.events.length-f,c.resolve(l.events.slice(f),l)),c.resolveTo&&(l.events=c.resolveTo(l.events,l))}function xn(){let c=y(),f=l.previous,w=l.currentConstruct,b=l.events.length,j=Array.from(a);return{restore:L,from:b};function L(){e=c,l.previous=f,l.currentConstruct=w,l.events.length=b,a=j,M()}}function M(){e.line in i&&e.column<2&&(e.column=i[e.line],e.offset+=i[e.line]-1)}}function Pn(n,t){let r=t.start._index,e=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex,u;if(r===i)u=[n[r].slice(e,o)];else{if(u=n.slice(r,i),e>-1){let a=u[0];typeof a=="string"?u[0]=a.slice(e):u.shift()}o>0&&u.push(n[i].slice(0,o))}return u}function Nn(n,t){let r=-1,e=[],i;for(;++r<n.length;){let o=n[r],u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&i)continue;u=" ";break}default:u=String.fromCharCode(o)}i=o===-2,e.push(u)}return e.join("")}var V={};wn(V,{attentionMarkers:()=>et,contentInitial:()=>Xn,disable:()=>rt,document:()=>Wn,flow:()=>Zn,flowInitial:()=>Yn,insideSpan:()=>tt,string:()=>$n,text:()=>nt});import{attention as K,autolink as Dn,blockQuote as Mn,characterEscape as dn,characterReference as pn,codeFenced as an,codeIndented as q,codeText as Rn,definition as Hn,hardBreakEscape as Qn,headingAtx as Un,htmlFlow as qn,htmlText as Gn,labelEnd as Jn,labelStartImage as Kn,labelStartLink as Vn,lineEnding as G,list as k,setextUnderline as fn,thematicBreak as J}from"./6f6cff.js";var Wn={[42]:k,[43]:k,[45]:k,[48]:k,[49]:k,[50]:k,[51]:k,[52]:k,[53]:k,[54]:k,[55]:k,[56]:k,[57]:k,[62]:Mn},Xn={[91]:Hn},Yn={[-2]:q,[-1]:q,[32]:q},Zn={[35]:Un,[42]:J,[45]:[fn,J],[60]:qn,[61]:fn,[95]:J,[96]:an,[126]:an},$n={[38]:pn,[92]:dn},nt={[-5]:G,[-4]:G,[-3]:G,[33]:Kn,[38]:pn,[42]:K,[60]:[Dn,Gn],[91]:Vn,[92]:[Qn,dn],[93]:Jn,[95]:K,[96]:Rn},tt={null:[K,rn]},et={null:[42,95]},rt={null:[]};function Ft(n){let r=it([V,...(n||{}).extensions||[]]),e={defined:[],lazy:{},constructs:r,content:i(Z),document:i(tn),flow:i(en),string:i(on),text:i(un)};return e;function i(o){return u;function u(a){return cn(e,o,a)}}}export{Ft as parse};
//# sourceMappingURL=parse.js.map