/* esm.sh - esbuild bundle(estree-util-build-jsx@2.2.2) node production */
import{walk as k}from"./a72b14.js";import{name as w}from"./595cb8.js";var v=/@(jsx|jsxFrag|jsxImportSource|jsxRuntime)\s+(\S+)/g;function L(e,t){let i=t||{},p=i.runtime==="automatic",s={},c={};return k(e,{enter(n){if(n.type==="Program"){let l=n.comments||[],y=-1;for(;++y<l.length;){v.lastIndex=0;let a=v.exec(l[y].value);for(;a;)s[a[1]]=a[2],a=v.exec(l[y].value)}if(s.jsxRuntime)if(s.jsxRuntime==="automatic"){if(p=!0,s.jsx)throw new Error("Unexpected `@jsx` pragma w/ automatic runtime");if(s.jsxFrag)throw new Error("Unexpected `@jsxFrag` pragma w/ automatic runtime")}else if(s.jsxRuntime==="classic"){if(p=!1,s.jsxImportSource)throw new Error("Unexpected `@jsxImportSource` w/ classic runtime")}else throw new Error("Unexpected `jsxRuntime` `"+s.jsxRuntime+"`, expected `automatic` or `classic`")}},leave(n){if(n.type==="Program"){let r=[];c.fragment&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"Fragment"},local:{type:"Identifier",name:"_Fragment"}}),c.jsx&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsx"},local:{type:"Identifier",name:"_jsx"}}),c.jsxs&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxs"},local:{type:"Identifier",name:"_jsxs"}}),c.jsxDEV&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxDEV"},local:{type:"Identifier",name:"_jsxDEV"}}),r.length>0&&n.body.unshift({type:"ImportDeclaration",specifiers:r,source:{type:"Literal",value:(s.jsxImportSource||i.importSource||"react")+(i.development?"/jsx-dev-runtime":"/jsx-runtime")}})}if(n.type!=="JSXElement"&&n.type!=="JSXFragment")return;let l=[],y=-1;for(;++y<n.children.length;){let r=n.children[y];if(r.type==="JSXExpressionContainer")r.expression.type!=="JSXEmptyExpression"&&l.push(r.expression);else if(r.type==="JSXText"){let u=r.value.replace(/\t/g," ").replace(/ *(\r?\n|\r) */g,`
`).replace(/\n+/g,`
`).replace(/\n+$/,"").replace(/^\n+/,"").replace(/\n/g," ");u&&l.push(d(r,{type:"Literal",value:u}))}else l.push(r)}let a,f=[],m=[],o=[],E;if(n.type==="JSXElement"){a=g(n.openingElement.name),a.type==="Identifier"&&/^[a-z]/.test(a.name)&&(a=d(a,{type:"Literal",value:a.name}));let r,u=n.openingElement.attributes,S=-1;for(;++S<u.length;){let I=u[S];if(I.type==="JSXSpreadAttribute")f.length>0&&(m.push({type:"ObjectExpression",properties:f}),f=[]),m.push(I.argument),r=!0;else{let j=J(I);if(p&&j.key.type==="Identifier"&&j.key.name==="key"){if(r)throw new Error("Expected `key` to come before any spread expressions");E=j.value}else f.push(j)}}}else p?(c.fragment=!0,a={type:"Identifier",name:"_Fragment"}):a=b(s.jsxFrag||i.pragmaFrag||"React.Fragment");p?l.length>0&&f.push({type:"Property",key:{type:"Identifier",name:"children"},value:l.length>1?{type:"ArrayExpression",elements:l}:l[0],kind:"init",method:!1,shorthand:!1,computed:!1}):o=l,f.length>0&&m.push({type:"ObjectExpression",properties:f});let x,h;if(m.length>1?(m[0].type!=="ObjectExpression"&&m.unshift({type:"ObjectExpression",properties:[]}),x={type:"CallExpression",callee:b("Object.assign"),arguments:m,optional:!1}):m.length>0&&(x=m[0]),p){o.push(x||{type:"ObjectExpression",properties:[]}),E?o.push(E):i.development&&o.push({type:"Identifier",name:"undefined"});let r=l.length>1;if(i.development){c.jsxDEV=!0,h={type:"Identifier",name:"_jsxDEV"},o.push({type:"Literal",value:r});let u={type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"fileName"},value:{type:"Literal",value:i.filePath||"<source.js>"}}]};n.loc&&u.properties.push({type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"lineNumber"},value:{type:"Literal",value:n.loc.start.line}},{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"columnNumber"},value:{type:"Literal",value:n.loc.start.column+1}}),o.push(u,{type:"ThisExpression"})}else r?(c.jsxs=!0,h={type:"Identifier",name:"_jsxs"}):(c.jsx=!0,h={type:"Identifier",name:"_jsx"})}else(x||o.length>0)&&o.unshift(x||{type:"Literal",value:null}),h=b(s.jsx||i.pragma||"React.createElement");o.unshift(a),this.replace(d(n,{type:"CallExpression",callee:h,arguments:o,optional:!1}))}}),e}function J(e){let t;return e.value?e.value.type==="JSXExpressionContainer"?t=e.value.expression:(t=e.value,delete t.raw):t={type:"Literal",value:!0},d(e,{type:"Property",key:g(e.name),value:t,kind:"init",method:!1,shorthand:!1,computed:!1})}function g(e){let t;if(e.type==="JSXMemberExpression"){let i=g(e.property);t={type:"MemberExpression",object:g(e.object),property:i,computed:i.type==="Literal",optional:!1}}else e.type==="JSXNamespacedName"?t={type:"Literal",value:e.namespace.name+":"+e.name.name}:t=w(e.name)?{type:"Identifier",name:e.name}:{type:"Literal",value:e.name};return d(e,t)}function b(e){let t=e.split("."),i=-1,p;for(;++i<t.length;){let s=w(t[i])?{type:"Identifier",name:t[i]}:{type:"Literal",value:t[i]};p=p?{type:"MemberExpression",object:p,property:s,computed:!!(i&&s.type==="Literal"),optional:!1}:s}return p}function d(e,t){let i=["start","end","loc","range","comments"],p=-1;for(;++p<i.length;){let s=i[p];s in e&&(t[s]=e[s])}return t}export{L as buildJsx};
//# sourceMappingURL=estree-util-build-jsx.mjs.map