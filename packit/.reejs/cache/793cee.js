/* esm.sh - esbuild bundle(micromark-extension-gfm-strikethrough@1.0.7) node production */
var d={enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}};import{splice as p}from"./5b8b11.js";import{classifyCharacter as k}from"./c64720.js";import{resolveAll as q}from"./fbc16c.js";function x(m){let l=(m||{}).singleTilde,f={tokenize:y,resolveAll:S};return l==null&&(l=!0),{text:{[126]:f},insideSpan:{null:[f]},attentionMarkers:{null:[126]}};function S(t,i){let r=-1;for(;++r<t.length;)if(t[r][0]==="enter"&&t[r][1].type==="strikethroughSequenceTemporary"&&t[r][1]._close){let e=r;for(;e--;)if(t[e][0]==="exit"&&t[e][1].type==="strikethroughSequenceTemporary"&&t[e][1]._open&&t[r][1].end.offset-t[r][1].start.offset===t[e][1].end.offset-t[e][1].start.offset){t[r][1].type="strikethroughSequence",t[e][1].type="strikethroughSequence";let u={type:"strikethrough",start:Object.assign({},t[e][1].start),end:Object.assign({},t[r][1].end)},h={type:"strikethroughText",start:Object.assign({},t[e][1].end),end:Object.assign({},t[r][1].start)},n=[["enter",u,i],["enter",t[e][1],i],["exit",t[e][1],i],["enter",h,i]],s=i.parser.constructs.insideSpan.null;s&&p(n,n.length,0,q(s,t.slice(e+1,r),i)),p(n,n.length,0,[["exit",h,i],["enter",t[r][1],i],["exit",t[r][1],i],["exit",u,i]]),p(t,e-1,r-e+3,n),r=e+n.length-2;break}}for(r=-1;++r<t.length;)t[r][1].type==="strikethroughSequenceTemporary"&&(t[r][1].type="data");return t}function y(t,i,r){let e=this.previous,u=this.events,h=0;return n;function n(o){return e===126&&u[u.length-1][1].type!=="characterEscape"?r(o):(t.enter("strikethroughSequenceTemporary"),s(o))}function s(o){let a=k(e);if(o===126)return h>1?r(o):(t.consume(o),h++,s);if(h<2&&!l)return r(o);let c=t.exit("strikethroughSequenceTemporary"),g=k(o);return c._open=!g||g===2&&!!a,c._close=!a||a===2&&!!g,i(o)}}}export{x as gfmStrikethrough,d as gfmStrikethroughHtml};
//# sourceMappingURL=micromark-extension-gfm-strikethrough.mjs.map